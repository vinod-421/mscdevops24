on:
  issue_comment:
    types: [created]
jobs:
  move-issue:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
 
      - name: Authenticate GitHub CLI
        run: echo "${{ secrets.TOKEN }}" | gh auth login --with-token
 
      - name: Check GitHub CLI Authentication
        run: gh auth status
 
      # - name: Get Project List
      #   id: get_project_list
      #   run: |
      #     PROJECT_LIST=$(gh project list --format json | jq -r '.projects[]')
      #     echo "PROJECT_LIST=${PROJECT_LIST}" >> $GITHUB_ENV
      #   continue-on-error: true
 
      - name: Get Project Number
        id: get_project
        run: |
          PROJECT_NUMBER=$(gh project list --format json | jq -r '.projects[] | select(.title=="github-actions-lab") | .number')
          echo "PROJECT_NUMBER=${PROJECT_NUMBER}" >> $GITHUB_ENV
 
      - name: Get Issue URL
        id: get_issue
        run: |
          ISSUE_URL=$(gh issue view "${{ github.event.issue.number }}" --json url | jq -r '.url')
          echo "ISSUE_URL=${ISSUE_URL}" >> $GITHUB_ENV
 
